<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Formation Arduino : Part 1</title><meta name="generator" content="Hovercraft! 1.0 http://regebro.github.com/hovercraft"></meta><link rel="stylesheet" href="css/hovercraft.css" media="all"></link><link rel="stylesheet" href="css/impressConsole.css" media="all"></link><link rel="stylesheet" href="css/highlight.css" media="all"></link><link rel="stylesheet" href="css/style.css" media="screen,projection"></link></head><body class="impress-not-supported"><div id="impress" data-transition-duration="1000"><div class="step" step="0" data-x="0" data-y="0"><h1 id="formation-arduino">Formation Arduino</h1><h2 id="partie-1-bases">Partie 1 : Bases !</h2></div><div class="step" step="1" id="sect_structure" data-x="1600" data-y="0"><h1 id="structure-d-un-programme">Structure d'un programme</h1><p>Depuis la version 1 : programmes en <tt>.pde</tt></p></div><div class="step" step="2" data-x="3200" data-y="0"><h1 id="declarations"># D&#xE9;clarations</h1><pre class="highlight code c"><span class="cp">#define FOO 42          </span><span class="c1">// define, macros
</span><span class="cp">#include "stuff.h"      </span><span class="c1">// fichier du projet
</span><span class="cp">#include &lt;DmxSimple.h&gt;  </span><span class="c1">// lib
</span></pre><ul><li>&#xE9;valu&#xE9;es &#xE0; la compilation (et remplac&#xE9;s)</li></ul></div><div class="step" step="3" data-x="4800" data-y="0"><h1 id="setup">setup()</h1><pre class="highlight code c"><span class="kt">void</span> <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// init ....
</span><span class="p">}</span></pre><p>Initialisation du programme</p><ul><li>d&#xE9;claration des entr&#xE9;e/sorties (E/S)</li><li>interruptions</li><li>variables globales</li><li>tout pour mettre en marche...</li></ul></div><div class="step" step="4" data-x="6400" data-y="0"><h1 id="loop">loop()</h1><pre class="highlight code c"><span class="kt">void</span> <span class="nf">loop</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// init ....
</span><span class="p">}</span></pre><p>Le programme en lui m&#xEA;me : fonction principale.</p><p>Elle boucle ind&#xE9;finiment....</p><pre class="highlight ">Pour toujours...
    loop()</pre></div><div class="step" step="5" data-x="8000" data-y="0"><h1 id="premier-programme">Premier programme</h1><pre class="highlight code c"><span class="kt">void</span> <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// init...
</span><span class="p">}</span>

<span class="kt">void</span> <span class="nf">loop</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// programme...
</span><span class="p">}</span></pre><p>Un programme (inutile mais) fonctionnel...</p></div><div class="step" step="6" id="sect_sorties_num" data-y="1600" data-x="8000"><h1 id="sorties-numeriques">Sorties Num&#xE9;riques</h1><img src="imgs/sorties_num/ArduinoUno.jpg" alt="" width="600px" height=""></img></div><div class="step" step="7" data-y="1600" data-x="9600"><h1 id="pinmode">pinMode()</h1><p>Une broche peut &#xEA;tre en entr&#xE9;e ou sortie...</p><p>il faut choisir au d&#xE9;marrage du programme (<tt>setup()</tt>)</p><pre class="highlight code c"><span class="kt">void</span> <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">pinMode</span><span class="p">(</span><span class="n">LED_BUILTIN</span><span class="p">,</span> <span class="n">OUTPUT</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">loop</span><span class="p">()</span> <span class="p">{}</span></pre></div><div class="step" step="8" data-x="11200" data-y="1600"><h1 id="constantes">Constantes</h1><p>Arduino propose des constantes</p><ul><li>modes<blockquote><ul><li><tt>OUTPUT</tt></li><li><tt>INPUT</tt></li><li><tt>INPUT_PULLUP</tt></li></ul></blockquote></li><li>niveaux<blockquote><ul><li><tt>HIGH</tt></li><li><tt>LOW</tt></li></ul></blockquote></li><li>des raccourcis...<blockquote><ul><li><tt>LED_BUILTIN</tt></li><li><tt>true</tt></li><li><tt>false</tt></li></ul></blockquote></li></ul></div><div class="step" step="9" data-x="12800" data-y="1600"><h1 id="allumer-une-led">Allumer une LED</h1><div class="notes"><p>lancer un bout d'exo pour allumer la LED</p></div></div><div class="step" step="10" data-x="14400" data-y="1600"><h1 id="soluce">Soluce :)</h1><pre class="highlight code c"><span class="kt">void</span> <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">pinMode</span><span class="p">(</span><span class="n">LED_BUILTIN</span><span class="p">,</span> <span class="n">OUTPUT</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">loop</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">digitalWrite</span><span class="p">(</span><span class="n">LED_BUILTIN</span><span class="p">,</span> <span class="n">HIGH</span><span class="p">);</span>
<span class="p">}</span></pre></div><div class="step" step="11" data-x="16000" data-y="1600"><h1 id="pour-deux-instructions">Pour deux instructions...</h1><h2 id="digitalwrite">digitalWrite()</h2><ul><li>permet <em>"d'&#xE9;crire"</em> un niveau logique sur une sortie</li><li>active <span class="i">imm&#xE9;diatement</span> la sortie au niveau demand&#xE9;</li></ul><h2 id="delay-t">delay(t)</h2><ul><li>permet d'attendre un temps t... <span class="i">en millisecondes</span> !</li><li>pendant ce temps l&#xE0;, l'arduino ne fait <span class="i">rien d'autre</span> !</li></ul></div><div class="step" step="12" data-x="17600" data-y="1600"><h1 id="faire-clignoter-la-led">Faire clignoter la LED</h1><p>... le <em>hello world</em> en &#xE9;lectronique...</p><div class="notes"><p>encore un exo</p></div></div><div class="step" step="13" data-x="19200" data-y="1600"><h1 id="id1">Soluce :)</h1><pre class="highlight code c"><span class="cp">#define TEMPS 1000
</span>
<span class="kt">void</span> <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">pinMode</span><span class="p">(</span><span class="n">LED_BUILTIN</span><span class="p">,</span> <span class="n">OUTPUT</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">loop</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">digitalWrite</span><span class="p">(</span><span class="n">LED_BUILTIN</span><span class="p">,</span> <span class="n">HIGH</span><span class="p">);</span>
    <span class="n">delay</span><span class="p">(</span><span class="n">TEMPS</span><span class="p">);</span>
    <span class="n">digitalWrite</span><span class="p">(</span><span class="n">LED_BUILTIN</span><span class="p">,</span> <span class="n">LOW</span><span class="p">);</span>
    <span class="n">delay</span><span class="p">(</span><span class="n">TEMPS</span><span class="p">);</span>
<span class="p">}</span></pre></div><div class="step" step="14" data-y="3200" data-x="19200"><h1 id="boucles-simples">Boucles simples</h1></div><div class="step" step="15" data-y="3200" data-x="20800"><h1 id="conditions">Conditions</h1><ul><li>Tout ce qui n'est pas 0 est vrai</li></ul><pre class="highlight code c"><span class="nb">true</span> <span class="o">||</span> <span class="nb">true</span> <span class="c1">// true
</span><span class="nb">true</span> <span class="o">||</span> <span class="nb">false</span> <span class="c1">// true
</span><span class="nb">false</span> <span class="o">||</span> <span class="nb">false</span> <span class="c1">// false
</span>
<span class="nb">true</span> <span class="o">&amp;&amp;</span> <span class="nb">true</span> <span class="c1">// true
</span><span class="nb">true</span> <span class="o">&amp;&amp;</span> <span class="nb">false</span> <span class="c1">// false
</span><span class="nb">false</span> <span class="o">&amp;&amp;</span> <span class="nb">false</span> <span class="c1">// false
</span>
<span class="o">!</span><span class="nb">true</span> <span class="c1">// false</span></pre><div class="notes"><p>distributif, communatif</p></div></div><div class="step" step="16" data-x="22400" data-y="3200"><h1 id="variables">Variables</h1><ul><li>D&#xE9;finir des noms pour y mettre des valeurs :</li></ul><pre class="highlight code c"><span class="c1">// premier exemple : l'entier
</span><span class="kt">int</span> <span class="n">foo</span> <span class="o">=</span> <span class="mi">42</span><span class="p">;</span>

<span class="c1">// pour les autres on verra plus tard.
</span></pre></div><div class="step" step="17" data-x="24000" data-y="3200"><h1 id="operations-operateurs">Op&#xE9;rations, Op&#xE9;rateurs</h1><h2 id="maths">Maths</h2><pre class="highlight code c"><span class="o">=</span>       <span class="c1">// assignation
</span><span class="o">-</span> <span class="o">+</span> <span class="o">*</span>   <span class="c1">// vous connaissez...
</span><span class="o">/</span>       <span class="c1">// division enti&#xE8;re
</span><span class="o">%</span>       <span class="c1">// reste de la division enti&#xE8;re
</span><span class="o">--</span> <span class="o">++</span>   <span class="c1">// d&#xE9;cr&#xE9;ment/incr&#xE9;ment</span></pre><h2 id="logiques">Logiques</h2><pre class="highlight code c"><span class="o">==</span>      <span class="c1">// &#xE9;galit&#xE9;
</span><span class="o">!=</span>      <span class="c1">// diff&#xE9;rent
</span><span class="o">&lt;</span> <span class="o">&gt;</span>     <span class="c1">// inf&#xE9;rieur/sup&#xE9;rieur
</span><span class="o">&gt;=</span> <span class="o">&lt;=</span>   <span class="c1">// inf/sup ou &#xE9;gal</span></pre></div><div class="step" step="18" data-x="25600" data-y="3200"><h1 id="while">While</h1><blockquote><p>Tant que je gagne, je joue ! &#x2015; Coluche</p></blockquote><pre class="highlight code c"><span class="k">while</span> <span class="p">(</span><span class="n">je</span> <span class="n">gagne</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// je joue
</span><span class="p">}</span>

<span class="c1">// -- Arduino</span></pre><ul><li>faire quelque chose tant qu'une condition est vraie...</li><li>ou infiniment si la condition est toujours vraie (<tt>true</tt>)</li></ul></div><div class="step" step="19" data-x="27200" data-y="3200"><h1 id="faire-clignoter-une-led-10-fois">Faire clignoter une LED 10 fois</h1></div><div class="step" step="20" data-x="28800" data-y="3200"><h1 id="id2">Soluce</h1><pre class="highlight code c"><span class="cp">#define NB 10       </span><span class="c1">// nombre de blinks
</span><span class="cp">#define TEMPS 1000  </span><span class="c1">// intervales
</span>
<span class="kt">int</span> <span class="n">i</span><span class="p">;</span>

<span class="kt">void</span> <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">pinMode</span><span class="p">(</span><span class="n">LED_BUILTIN</span><span class="p">,</span> <span class="n">OUTPUT</span><span class="p">);</span>
    <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">loop</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">while</span> <span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="n">NB</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">digitalWrite</span><span class="p">(</span><span class="n">LED_BUILTIN</span><span class="p">,</span> <span class="n">HIGH</span><span class="p">);</span>
        <span class="n">delay</span><span class="p">(</span><span class="n">TEMPS</span><span class="p">);</span>
        <span class="n">digitalWrite</span><span class="p">(</span><span class="n">LED_BUILTIN</span><span class="p">,</span> <span class="n">LOW</span><span class="p">);</span>
        <span class="n">delay</span><span class="p">(</span><span class="n">TEMPS</span><span class="p">);</span>
        <span class="n">i</span><span class="o">++</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span></pre></div><div class="step" step="21" data-y="4800" data-x="28800"><h1 id="fonctions-procedures">Fonctions/Proc&#xE9;dures</h1><img src="imgs/fonctions.png" alt="" width="600px" height=""></img></div><div class="step" step="22" data-y="4800" data-x="30400"><h1 id="concept">Concept</h1><ul><li>bout de programme d&#xE9;sign&#xE9; par un nom</li><li>peut recevoir des param&#xE8;tres en entr&#xE9;e</li><li>peut renvoyer une valeur</li></ul><h1 id="variables-et-fonctions">Variables et fonctions</h1><ul><li>les variables d&#xE9;finies dans les fonctions ne sont accessible <span class="i">que dedans</span></li><li>les variables d&#xE9;finies en dehors de toute fonction sont accessibles <span class="i">partout</span></li></ul></div><div class="step" step="23" data-x="32000" data-y="4800"><h1 id="syntaxe-generale">Syntaxe g&#xE9;n&#xE9;rale</h1><pre class="highlight code c"><span class="o">&lt;</span><span class="n">type</span> <span class="n">de</span> <span class="n">retour</span><span class="o">&gt;</span> <span class="n">nom_de_la_fonction</span> <span class="p">(</span><span class="n">type1</span><span class="p">,</span> <span class="n">param1</span><span class="p">,</span> <span class="n">etc</span><span class="p">...)</span> <span class="p">{</span>
    <span class="c1">// code
</span><span class="p">}</span>

<span class="c1">// pour une proc&#xE9;dure (sans retour)
</span><span class="kt">void</span> <span class="n">fonction</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// code
</span><span class="p">}</span>

<span class="c1">// retour d'un entier :
</span><span class="kt">int</span> <span class="n">fonction</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// code
</span>    <span class="k">return</span> <span class="n">un_truc</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// +42
</span><span class="kt">int</span> <span class="n">plus42</span><span class="p">(</span><span class="kt">int</span> <span class="n">n</span><span class="p">)</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">temp</span> <span class="o">=</span> <span class="n">n</span><span class="o">+</span><span class="mi">42</span><span class="p">;</span>
    <span class="k">return</span> <span class="n">temp</span><span class="p">;</span>
<span class="p">}</span></pre></div><div class="step" step="24" data-x="33600" data-y="4800"><h1 id="blink-en-fonction">Blink en fonction !</h1></div><div class="step" step="25" data-x="35200" data-y="4800"><h1 id="id3">Soluce</h1><pre class="highlight code c"><span class="cp">#define LED 13
#define TEMPS 1000
</span>
<span class="kt">void</span> <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">pinMode</span><span class="p">(</span><span class="n">LED</span><span class="p">,</span> <span class="n">OUTPUT</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">loop</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">blink</span><span class="p">();</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">blink</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">digitalWrite</span><span class="p">(</span><span class="n">LED_BUILTIN</span><span class="p">,</span> <span class="n">HIGH</span><span class="p">);</span>
    <span class="n">delay</span><span class="p">(</span><span class="n">TEMPS</span><span class="p">);</span>
    <span class="n">digitalWrite</span><span class="p">(</span><span class="n">LED_BUILTIN</span><span class="p">,</span> <span class="n">LOW</span><span class="p">);</span>
    <span class="n">delay</span><span class="p">(</span><span class="n">TEMPS</span><span class="p">);</span>
<span class="p">}</span></pre></div><div class="step" step="26" data-x="36800" data-y="4800"><h1 id="parametrer-le-temps-d-allumage">Param&#xE8;trer le temps d'allumage</h1></div><div class="step" step="27" data-x="38400" data-y="4800"><h1 id="id4">Soluce</h1><pre class="highlight code c"><span class="cp">#define LED 13
#define TEMPS 500
</span>
<span class="kt">void</span> <span class="nf">setup</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">pinMode</span><span class="p">(</span><span class="n">LED</span><span class="p">,</span> <span class="n">OUTPUT</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">loop</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">blink</span><span class="p">(</span><span class="n">TEMPS</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">blink</span><span class="p">(</span><span class="kt">int</span> <span class="n">temps</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">digitalWrite</span><span class="p">(</span><span class="n">LED_BUILTIN</span><span class="p">,</span> <span class="n">HIGH</span><span class="p">);</span>
    <span class="n">delay</span><span class="p">(</span><span class="n">temps</span><span class="p">);</span>
    <span class="n">digitalWrite</span><span class="p">(</span><span class="n">LED_BUILTIN</span><span class="p">,</span> <span class="n">LOW</span><span class="p">);</span>
    <span class="n">delay</span><span class="p">(</span><span class="n">temps</span><span class="p">);</span>
<span class="p">}</span></pre></div><div class="step" step="28" data-y="6400" data-x="38400"><h1 id="conditionnelles">Conditionnelles</h1></div><div class="step" step="29" data-y="6400" data-x="40000"><h1 id="et-si">Et si ?</h1><pre class="highlight code c"><span class="k">if</span> <span class="p">(</span><span class="n">condition</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// fait un truc
</span><span class="p">}</span></pre><h1 id="et-sinon">Et sinon ?</h1><pre class="highlight code c"><span class="k">if</span> <span class="p">(</span><span class="n">condition</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// fait un truc
</span><span class="p">}</span> <span class="k">else</span> <span class="p">{</span> <span class="c1">// sinon...
</span>    <span class="c1">// ou un autre
</span><span class="p">}</span></pre></div><div class="step" step="30" data-x="41600" data-y="6400"><h1 id="on-en-chaine">On (en)chaine !</h1><pre class="highlight code c"><span class="k">if</span> <span class="p">(</span><span class="n">condition</span> <span class="n">A</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// truc A
</span><span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">condition</span> <span class="n">B</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// truc B
</span><span class="p">}</span> <span class="k">else</span> <span class="p">{</span> <span class="c1">// sinon
</span>    <span class="c1">// truc C
</span><span class="p">}</span></pre></div></div><div id="hovercraft-help" class="hide"><table><tr><th>Space</th><td>Forward</td></tr><tr><th>Right, Down, Page Down</th><td>Next slide</td></tr><tr><th>Left, Up, Page Up</th><td>Previous slide</td></tr><tr><th>P</th><td>Open presenter console</td></tr><tr><th>H</th><td>Toggle this help</td></tr></table></div><script type="text/javascript" src="js/impress.js"></script><script type="text/javascript" src="js/impressConsole.js"></script><script type="text/javascript" src="js/hovercraft.js"></script></body></html>